<%= render partial: 'shared/nav' %>
<div class="container-fluid">
  <div class="row">
    <aside class="col-3 bd-sidebar">
      <%= render partial: 'shared/aside' %>
    </aside>
    <div class="col-9">
      <div class="container">
        <h1 class="text-center">Volunteer Opportunities</h1>

        <%# Search Form %>
        <%= form_with(scope: :search, url: tasks_path, method: 'get', local: true) do |f| %>
          <%= f.label :title %>
          <%= f.text_field :title %>

          <%= f.label :skills %>
          <%= f.collection_select :skills, Skill.all, :id, :name, {}, { multiple: true } %>

          <%= f.submit 'Search' %>
        <% end %>

        <%# Display each task in a horizontal card  %>
        <% @tasks.each do |task| %>
          <div class="card mb-3" style="max-width: 900px;">
            <div class="row no-gutters">
              <div class="col-md-4">
                <%= image_tag image_for(task), class: 'card-img-top' %>
              </div>
              <div class="col-md-8">
                <div class="card-body">
                  <h5 class="card-title"><%= task.title %></h5>
                  <h5 class="card-title"><%= task.summary %></h5>
                  <h5 class="card-title"><%= task.address.street_add %>, <%= task.address.suburb.capitalize %>, <%= task.address.state.capitalize %></h5>
                  <% task.skills.each do |skill| %>
                    <%= skill.name %>
                  <% end %>
                  <div class="date-time-containter">
                    <p class="card-text text-muted"><%= task.date.to_formatted_s(:rfc822) %></p>
                    <p class="card-text text-muted"><%= task.hours %> hours</p>
                  </div>
                  <%= link_to 'More details', task %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>